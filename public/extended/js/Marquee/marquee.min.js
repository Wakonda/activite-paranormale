class Marquee{constructor(s,t){this.element=s,this.options=Object.assign({yScroll:"top",showSpeed:850,scrollSpeed:12,pauseSpeed:5e3,pauseOnHover:!0,loop:-1,cssShowing:"marquee-showing",init:null,beforeshow:null,show:null,aftershow:null},t),this.lis=Array.from(this.element.querySelectorAll("li")),this.current=-1,this.hardPaused=!1,this.paused=!1,this.loopCount=0,this.options.init&&this.options.init(this.element,this.options),this.initEventListeners(),this.showNext()}pause(){this.hardPaused=!0,this.paused=!0}resume(){this.hardPaused=!1,this.paused=!1,this.scroll(this.getCurrentLi())}next(){this.resetStyles(),this.showNext(),this.pause()}previous(){this.resetStyles(),this.showPrevious(),this.resume()}update(){let s=this.lis.length;this.lis=Array.from(this.element.querySelectorAll("> li")),s<=1&&this.resume()}resetStyles(){this.lis.forEach(s=>{s.classList.remove(this.options.cssShowing),s.style=""})}show(s){if(this.isAnyShowing())return;let t=this.lis[s];this.options.beforeshow&&this.options.beforeshow(this.element,t),t.style.top="top"===this.options.yScroll?`-${t.offsetHeight}px`:`${t.offsetHeight}px`,t.style.left="0",t.classList.add(this.options.cssShowing),this.animate(t,{top:"0px"},this.options.showSpeed,()=>{this.options.show&&this.options.show(this.element,t),this.scroll(t)})}scroll(s,t=this.options.pauseSpeed){this.paused||setTimeout(()=>{if(this.doScroll(s)){let t=s.offsetWidth,i=parseInt(getComputedStyle(s).left,10)||0;this.animate(s,{left:`${-t}px`},(t+i)*this.options.scrollSpeed,()=>{this.finish(s)})}else if(this.lis.length>1){let e="top"===this.options.yScroll?"+":"-",o=this.element.clientHeight;this.animate(s,{top:`${e}${o}px`},this.options.showSpeed,()=>{this.finish(s)})}},t)}finish(s){this.options.aftershow&&this.options.aftershow(this.element,s),s.classList.remove(this.options.cssShowing),this.showNext()}doScroll(s){return s.offsetWidth>this.element.clientWidth}showNext(){this.current=(this.current+1)%this.lis.length,(0!==this.current||isNaN(this.options.loop)||!(this.options.loop>0)||(this.loopCount++,!(this.loopCount>=this.options.loop)))&&this.show(this.current)}showPrevious(){this.current=(this.current-1+this.lis.length)%this.lis.length,this.show(this.current)}isAnyShowing(){return this.lis.some(s=>s.classList.contains(this.options.cssShowing))}getCurrentLi(){return this.lis.find(s=>s.classList.contains(this.options.cssShowing))}initEventListeners(){this.options.pauseOnHover&&(this.element.addEventListener("mouseenter",()=>{this.hardPaused||this.pause()}),this.element.addEventListener("mouseleave",()=>{this.hardPaused||this.resume()}))}animate(s,t,i,e){let o=performance.now(),h={};for(let n in t)h[n]=parseFloat(getComputedStyle(s)[n])||0;let l=n=>{let r=Math.min((n-o)/i,1);for(let p in t){let u=h[p],a=parseFloat(t[p]),c=u+(a-u)*r;s.style[p]=`${c}px`}r<1?requestAnimationFrame(l):e&&e()};requestAnimationFrame(l)}}